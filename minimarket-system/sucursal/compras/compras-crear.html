<!-- Parcial de formulario de compra para uso en modal-template -->
<div class="card">
  <div class="card-header">Nueva Orden de Compra</div>
  <div class="card-body">
    <form id="formCompra" class="grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-4)">
      <div>
        <label class="label" for="proveedor_id">Proveedor</label>
        <select class="input" id="proveedor_id" name="proveedor_id" data-validate="required">
          <option value="">Seleccione un proveedor</option>
        </select>
      </div>
      <div>
        <label class="label" for="fecha">Fecha</label>
        <input class="input" id="fecha" name="fecha" type="date" data-validate="required" />
      </div>
      <div class="col-span-2">
        <label class="label" for="observaciones">Observaciones</label>
        <textarea id="observaciones" name="observaciones" rows="3"></textarea>
      </div>

      <div class="col-span-2">
        <label class="label" for="buscarProducto">Buscar producto</label>
        <input class="input" id="buscarProducto" type="text" placeholder="Código o nombre" />
        <div id="resultadosProductos" class="mt-2"></div>
      </div>

      <div class="col-span-2">
        <div class="card">
          <div class="card-header">Carrito de compra</div>
          <div class="card-body">
            <table id="carritoTable" class="table">
              <thead>
                <tr>
                  <th>Código</th>
                  <th>Producto</th>
                  <th>Cantidad</th>
                  <th>Precio costo</th>
                  <th>Subtotal</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="6" class="text-center text-muted">No hay productos agregados</td></tr>
              </tbody>
            </table>
            <div class="grid mt-3" style="grid-template-columns: 1fr 1fr; gap: var(--space-2)">
              <div><strong>Subtotal:</strong> <span id="subtotal">S/ 0.00</span></div>
              <div><strong>IGV (18%):</strong> <span id="igv">S/ 0.00</span></div>
              <div class="col-span-2"><strong>Total:</strong> <span id="total">S/ 0.00</span></div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-span-2">
        <button type="submit" class="btn btn-primary">Registrar</button>
      </div>
    </form>
  </div>
</div>